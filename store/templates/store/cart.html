{% extends 'store/base.html' %}
{% load static %}
{% block title %}Your Cart{% endblock %}

{% block content %}
<style>
  .hide-hero .hero-image,
  .hide-hero .welcome-banner {
    display: none;
  }
</style>

<div class="hide-hero">

<a href="{% url 'product_list' %}" class="btn" style="margin-bottom: 20px; display: inline-block;">⌂ Home</a>

<h2>Your Cart</h2>

{% if cart_items %}
  <div class="cart-items-container">
    {% for item in cart_items %}
      <div class="product-card" style="display: flex; gap: 20px; align-items: flex-start;">
        <img src="{% static item.product.image %}" alt="{{ item.product.name }}" style="width: 150px; height: 150px; object-fit: cover; border-radius: 10px;">
        <div>
          <h3>{{ item.product.name }}</h3>
          <p>{{ item.product.description }}</p>
          <p>Price: ₹{{ item.product.price }}</p>

          <div class="button-row">
            <form action="{% url 'decrement_quantity' item.product.id %}" method="post">
              {% csrf_token %}
              <button type="submit">−</button>
            </form>
            <span>{{ item.quantity }}</span>
            <form action="{% url 'increment_quantity' item.product.id %}" method="post">
              {% csrf_token %}
              <button type="submit">+</button>
            </form>
          </div>

          <p><strong>Subtotal: ₹{{ item.subtotal }}</strong></p>

          <form method="post" action="{% url 'remove_from_cart' item.product.id %}">
            {% csrf_token %}
            <button type="submit" class="btn" style="background-color: red; color: white;">Remove</button>
          </form>
        </div>
      </div>
    {% endfor %}

    <div style="text-align: right; margin-top: 20px;">
      <p><strong>Total Price: ₹{{ total_price }}</strong></p>
      <form action="{% url 'checkout' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn" style="background-color: green; color: white;">Buy Now</button>
      </form>
    </div>
  </div>
{% else %}
  <p>Your cart is empty.</p>
{% endif %}

</div>
{% endblock %}
